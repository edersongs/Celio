<!DOCTYPE html>
<html lang="pt" 
	  xmlns="http://www.w3.org/1999/xhtml" 
	  xmlns:th="http://www.thymeleaf.org"
	  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	  layout:decorator="'layout/default'">
	
<head>
	
	<th:block layout:fragment="css-extra">
		<!-- <link rel="stylesheet" type="text/css" th:href="@{/bower_components/morris.js/morris.css}"/> -->
		<!-- <link href="https://cdnjs.cloudflare.com/ajax/libs/c3/0.4.10/c3.min.css" rel="stylesheet" /> -->
	</th:block>
</head>
<body class="hold-transition skin-blue-light sidebar-mini sidebar-collapse">

	<section layout:fragment="conteudo">
		<!-- <section class="content-header">
			<h1>
				Impressões <small>Controle de impressões</small>
			</h1>
			<ol class="breadcrumb">
				<li><a href="#"><i class="fa fa-dashboard"></i></a></li>
			</ol>
		</section> -->

		<section class="content">
			<div class="col-md-6">
				<div class="box box-default">
						
					<div class="box-body">
					
	          			<div id="donutchart" style="height: 500px; position: relative;"></div>
	          			
					</div>
				</div>
			</div>
		</section>
	</section>
	
	<th:block layout:fragment="javascript-extra">
		<!-- <script th:src="@{/bower_components/morris.js/morris.min.js}"></script>
		<script th:src="@{/bower_components/raphael/raphael.min.js}"></script> -->
<!-- 		<script th:src="@{/helper/js/chart/graficos-home-config.js}"></script> -->
		<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
		<script type="text/javascript">
		  google.charts.load('current', {packages: ['corechart']});
		  google.charts.setOnLoadCallback(drawChart);
			
		  function drawChart() {
			 
			  	// - Opções de apresentação
		        var options = {
		          title: 'Total Quotas por Grupo',
		          pieHole: 0.4,
		        };
				
		        $.ajax({
		        	method: 'GET',
				  	url: '/graficoTotalQuotaGrupo',
			      	dataType: 'json',
			      	contentType: "application/json; charset=utf-8",
		            success: function (data) {
		                
		            	var array = [];		// - Definindo array que receberá os valores do Json retornado da requisição /graficoTotalQuotaGrupo
		                var i = 0;			// - Variável para incremento
		            	
		                // - Percorrendo Json e armazenando valores ao array
		                $.each(data, function () {
		                    array.push([data[i].label, data[i].value]);
		                    i += 1;
		                });
		                
		                var lista = google.visualization.arrayToDataTable(array, true)	// - Fazendo o bind do array para o tipo ArrayDataTable do gráfico

		             	// - Definindo o tipo de gráfico e buscando o id da div que está na tela onde o gráfico será apresentado
		                var chart = new google.visualization.PieChart(document.getElementById('donutchart'));

		                chart.draw(lista, options);   // - Adiciona ao objeto de gráfico os dados e opções de apresentação.
		            },
		            error: function (XMLHttpRequest, textStatus, errorThrown) {
		                alert('Erro ao Renderizar Gráfico');
		            }
		        });
		  }


		</script>
	</th:block>
</body>
</html>